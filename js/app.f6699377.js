(function(){"use strict";var t={8670:function(t,e,s){var i=s(9242),o=s(3396);function n(t,e){const s=(0,o.up)("router-view");return(0,o.wg)(),(0,o.j4)(s)}var r=s(89);const a={},l=(0,r.Z)(a,[["render",n]]);var u=l,c=s(2483),d=s(7139),m={__name:"GridItem",props:{item:{type:Object,required:!0},line:{type:Number,required:!0},column:{type:Number,required:!0}},setup(t){const e=t,s=(0,o.Fl)((()=>0!==e.item.value?e.item.value:e.item.notes.join())),i=(0,o.Fl)((()=>2===e.line||5===e.line)),n=(0,o.Fl)((()=>2===e.column||5===e.column)),r=(0,o.Fl)((()=>e.item.isSettled));return(t,e)=>((0,o.wg)(),(0,o.iD)("div",{class:(0,d.C_)({grid:!0,"grid--bottom":i.value,"grid--right":n.value,"grid--setted":r.value})},(0,d.zw)(s.value),3))}};const h=(0,r.Z)(m,[["__scopeId","data-v-dc41716c"]]);var f=h;const v=["value"];var w={__name:"GridInput",props:{value:{type:[Number,String],required:!0},line:{type:Number,required:!0},column:{type:Number,required:!0}},emits:["change"],setup(t,{emit:e}){const s=t,i=(0,o.Fl)((()=>2===s.line||5===s.line)),n=(0,o.Fl)((()=>2===s.column||5===s.column)),r=t=>{const i=t.target.value.replace(/\D/g,"")||"0";let o=Number(i);Number.isNaN(o)?o=0:o>9?o=9:o<0&&(o=0),t.target.value=o,e("change",t.target.value,s.line,s.column)};return(e,s)=>((0,o.wg)(),(0,o.iD)("div",{class:(0,d.C_)({grid:!0,"grid--bottom":i.value,"grid--right":n.value})},[(0,o._)("input",{value:t.value,onInput:r},null,40,v)],2))}};const p=(0,r.Z)(w,[["__scopeId","data-v-00529dc5"]]);var g=p;s(7658);class b{constructor(t){this.value=t,this.notes=[]}get isSettled(){return 0!==this.value}hasNotesValue(t){const e=this.notes.indexOf(t);return-1!==e}removeValueFromNotes(t){const e=this.notes.indexOf(t);return-1!==e&&(this.notes.splice(e,1),!0)}}var y=b;const S=t=>new Promise((e=>{setTimeout((()=>{e()}),t)})),N=(t,e)=>Array.isArray(t)&&Array.isArray(e)&&t.length===e.length&&t.every(((t,s)=>t===e[s]));function C(t,e){const s=3*Math.floor(t/3),i=3*Math.floor(e/3);return{startRow:s,startColumn:i}}function k(t,e){const{startRow:s,startColumn:i}=C(t,e);return{endRow:s+2,endColumn:i+2}}const V=Object.freeze({Settle:"Settle",Remove:"Remove"});class _{constructor(t,e){this.row=t,this.column=e}*[Symbol.iterator](){for(let s=0;s<9;s++)yield{row:this.row,column:s};for(let s=0;s<9;s++)yield{row:s,column:this.column};const{startRow:t,startColumn:e}=C(this.row,this.column);for(let s=t;s<t+3;s++)for(let t=e;t<e+3;t++)yield{row:s,column:t}}}class I{constructor(t,e){this.lNumber=t,this.cNumber=e}*[Symbol.iterator](){for(let t=0;t<this.lNumber;t++)for(let e=0;e<this.cNumber;e++)yield{row:t,column:e}}}class F{constructor(t){this.startRow=3*Math.floor(t/3),this.startColumn=t%3*3,this.endRow=this.startRow+3,this.endColumn=this.startColumn+3}*[Symbol.iterator](){for(let t=this.startRow;t<this.endRow;t++)for(let e=this.startColumn;e<this.endColumn;e++)yield{row:t,column:e}}}class x{constructor(t,e,s=!1){const{startRow:i,startColumn:o}=C(t,e),{endRow:n,endColumn:r}=k(t,e);this.startRow=s?t:i,this.startColumn=o,this.nextColumn=s?e+1:o,this.endRow=n,this.endColumn=r,this.afterCurrent=s}*[Symbol.iterator](){for(let t=this.startRow;t<=this.endRow;t++){for(let e=this.nextColumn;e<=this.endColumn;e++)yield{row:t,column:e};this.afterCurrent&&(this.nextColumn=this.startColumn)}}}const O=(t,e)=>t+e;class H{constructor(t){this.grids=t.map((t=>t.map((t=>{if("number"===typeof t)return new y(t);if(Array.isArray(t)){const e=new y(0);return e.notes=[...t],e}throw new Error("二维数组不正确")}))))}get(t,e){return this.grids[t][e]}map(t){return this.grids.map(((e,s)=>e.map(((e,i)=>t(e,s,i)))))}reduce(t,e,s,i){return this.grids.reduce(((s,o,...n)=>t(s,o.reduce(e,i),...n)),s)}unsettledItemCount(){return this.reduce(O,((t,e)=>t+(e.isSettled?0:1)),0,0)}notesTotal(){return this.reduce(O,((t,e)=>t+e.notes.length),0,0)}getNumbers(){return this.map((t=>t.isSettled?t.value:[...t.notes]))}isRowValidated(){for(let t=0;t<9;t++){const e=[...Array(9)].fill(0);for(let s=0;s<9;s++){const i=this.get(t,s),o=i.value-1;if(o>=0&&(e[o]+=1),e[o]>1)return!1}}return!0}isColumnValidated(){for(let t=0;t<9;t++){const e=[...Array(9)].fill(0);for(let s=0;s<9;s++){const i=this.get(s,t),o=i.value-1;if(o>=0&&(e[o]+=1),e[o]>1)return!1}}return!0}isGridValidated(){for(let t=0;t<9;t++){const e=[...Array(9)].fill(0),s=new F(t);for(const{row:t,column:i}of s){const s=this.get(t,i),o=s.value-1;if(o>=0&&(e[o]+=1),e[o]>1)return!1}}return!0}isValidated(){return this.isRowValidated()&&this.isColumnValidated()&&this.isGridValidated()}isCompleted(){const t=new I(9,9);for(const{row:e,column:s}of t){const t=this.get(e,s);if(!t.isSettled)return!1}return!0}isSuccess(){return this.isCompleted()&&this.isValidated()}}function R(t,e){const s=new Set(t);for(const i of e)s.delete(i);return s}class P{constructor(t,e=null,s=0){if("string"===typeof t[0]){const e=t.map((t=>t.split("").map((t=>parseInt(t)))));this.numbers=e}else this.numbers=t;this.callback=e,this.delay=s,this.listStack=[],this.itemStack=[],this.gridView=new H(this.numbers)}setNumbers(t){if("string"===typeof t[0]){const e=t.map((t=>t.split("").map((t=>parseInt(t)))));this.numbers=e}else this.numbers=t;this.gridView=new H(this.numbers)}setDelay(t){this.delay=t}reset(){this.gridView=new H(this.numbers)}isCompleted(){return this.gridView.isCompleted()}isValidated(){return this.gridView.isValidated()}isSuccess(){return this.gridView.isSuccess()}gridFor(t,e){return this.gridView.get(t,e)}async compute(){if(this.isCompleted())return;await this.lastPossibleNumber();let t=0,e=this.gridView.unsettledItemCount();while(!this.isCompleted()&&t!==e)t=e,await this.hiddenSingles(),e=this.gridView.unsettledItemCount();t=0,e=this.gridView.notesTotal();while(!this.isCompleted()&&t!==e)t=e,await this.obviousPairs(),e=this.gridView.notesTotal();await this.assumption()}async lastPossibleNumber(){const t=new I(9,9);for(const{row:e,column:s}of t){const t=this.gridFor(e,s);t.isSettled||await this.setGridNotes(e,s)}}async setGridNotes(t,e){const s=[...Array(9)].fill(0),i=new _(t,e);for(const{row:r,column:a}of i){const t=this.gridFor(r,a),e=t.value;0!==e&&(s[e-1]=1)}const o=[];s.forEach(((t,e)=>{0===t&&o.push(e+1)}));const n=this.gridFor(t,e);if(1===o.length){const s=o[0];await this.itemHaveSettled(t,e,s)}else await S(10),n.notes=o}async itemHaveSettled(t,e,s){this.callback?.(t,e,V.Settle),await S(this.delay);const i=this.gridFor(t,e);i.value=s,i.notes=[];const o=new _(t,e);for(const{row:n,column:r}of o)await this.removeItemNotesValue(n,r,s)}async removeItemNotesValue(t,e,s){const i=this.gridFor(t,e);if(!i.isSettled&&i.hasNotesValue(s)&&(this.callback?.(t,e,V.Remove),await S(this.delay),i.removeValueFromNotes(s),1===i.notes.length)){const s=i.notes[0];await this.itemHaveSettled(t,e,s)}}async hiddenSingles(){const t=new I(9,9);for(const{row:e,column:s}of t){const t=this.gridFor(e,s);t.isSettled||await this.fixItemByDifference(e,s)}}async fixItemByDifference(t,e){const s=new Set;for(let n=0;n<9;n++){const i=this.gridFor(n,e);n===t||i.isSettled||i.notes.forEach(s.add,s)}let i=await this.differenceItemNotes(t,e,s);if(i)return;s.clear();for(let n=0;n<9;n++){const i=this.gridFor(t,n);n===e||i.isSettled||i.notes.forEach(s.add,s)}if(i=await this.differenceItemNotes(t,e,s),i)return;s.clear();const o=new x(t,e);for(const{row:n,column:r}of o){const i=this.gridFor(n,r);n===t&&r===e||i.isSettled||i.notes.forEach(s.add,s)}await this.differenceItemNotes(t,e,s)}async differenceItemNotes(t,e,s){const i=this.gridFor(t,e),o=new Set([...i.notes]),n=R(o,s);if(1===n.size){const s=[...n][0];return await this.itemHaveSettled(t,e,s),!0}return!1}async obviousPairs(){const t=new I(9,9);for(const{row:e,column:s}of t){const t=this.gridFor(e,s);t.isSettled||2!==t.notes.length||await this.findSameNotes(e,s,t.notes)}}async findSameNotes(t,e,s){let i=1,o=s.length;const n=[e];for(let u=e+1;u<9;u++){const e=this.gridFor(t,u);if(N(e.notes,s)&&(n.push(u),i+=1,i===o)){await this.removeSameLineNotes(t,n,s);break}}i=1;const r=[t];for(let u=t+1;u<9;u++){const t=this.gridFor(u,e);if(N(t.notes,s)&&(r.push(u),i+=1,i===o)){await this.removeSameColumnNotes(e,r,s);break}}i=1;const a=[{row:t,column:e}],l=new x(t,e,!0);for(const{row:u,column:c}of l){const n=this.gridFor(u,c);if(N(n.notes,s)&&(a.push({row:u,column:c}),i+=1,i===o)){await this.removeSameGridNotes(t,e,a,s);break}}}async removeSameLineNotes(t,e,s){for(let i=0;i<9;i++)-1===e.indexOf(i)&&await this.removeItemNotesValues(t,i,s)}async removeSameColumnNotes(t,e,s){for(let i=0;i<9;i++)-1===e.indexOf(i)&&await this.removeItemNotesValues(i,t,s)}async removeSameGridNotes(t,e,s,i){const o=new x(t,e);for(const{row:n,column:r}of o){const t=s.findIndex((t=>t.row===n&&t.column===r));-1===t&&await this.removeItemNotesValues(n,r,i)}}async removeItemNotesValues(t,e,s){for(const i of s)await this.removeItemNotesValue(t,e,i)}async assumption(){await this.assumptionPush()}async assumptionPush(){const t=this.findNextGrid(),{row:e,column:s,notes:i}=t,o=i[0],n=this.gridView.getNumbers();this.listStack.push(n),this.itemStack.push({...t,index:0}),console.log("pick",e,s,o),await this.itemHaveSettled(e,s,o),await this.assumptionPushOrPop()}async assumptionPop(){const t=this.itemStack.pop(),e=this.listStack.pop();if(!t||!e)return;const{row:s,column:i,notes:o}=t,n=t.index+1,r=o[n];n<o.length-1&&(this.listStack.push(e),this.itemStack.push({...t,index:n})),this.gridView=new H(e),console.log("back-pick",s,i,r),await this.itemHaveSettled(s,i,r),await this.assumptionPushOrPop()}async assumptionPushOrPop(){this.isValidated()?this.isCompleted()||await this.assumptionPush():await this.assumptionPop()}findNextGrid(){const t=new I(9,9);let e=9,s=0,i=0,o=[];for(const{row:n,column:r}of t){const t=this.gridFor(n,r);!t.isSettled&&t.notes.length<e&&(s=n,i=r,o=[...t.notes],e=t.notes.length)}return{row:s,column:i,notes:o}}}var D=P,j=s(4870);const q=t=>{let e=0;for(let s=0;s<9;s++)for(let i=0;i<9;i++){const o=t[s][i];if(o<0||o>9)return"只能输入数字 1~9";o>0&&(e+=1)}if(e<17)return"至少要确定17个数"},A=t=>((0,o.dD)("data-v-113d9d54"),t=t(),(0,o.Cn)(),t),G={class:"container"},T={class:"button-container"},E=A((()=>(0,o._)("label",null,"延时(ms):",-1))),Y=["value"],$={class:"content"};var z={__name:"HomeView",setup(t){const e=(0,j.iH)([[3,0,0,0,0,0,9,0,0],[0,0,0,0,8,0,0,0,0],[0,0,0,0,1,0,0,0,0],[0,8,5,0,0,0,0,0,0],[0,0,0,3,0,4,7,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,7,0,0,0,1,0],[0,2,0,0,5,0,0,8,0],[4,0,0,0,0,0,3,0,0]]),s=(t,e,s)=>{c.line=t,c.column=e,a.value=s===V.Settle?"green":"red"},i=(0,j.iH)(""),n=(0,j.iH)(!1),r=(0,j.iH)(!1),a=(0,j.iH)("transparent"),l=(0,j.iH)(!1),u=(0,j.iH)(10),c=(0,j.qj)({line:0,column:0}),m=new D(e.value,s,u.value),h=(0,j.qj)(m),v=t=>{t.target.value=t.target.value.replace(/\D/g,""),u.value=t.target.value;const e=Number(t.target.value);h.delay=Number.isNaN(e)?10:e};async function w(){if(!r.value){if(!h.isValidated())return i.value="输入错误，请重新输入",void(n.value=!0);h.isSuccess()&&(i.value="成功",n.value=!1),r.value=!0,await h.compute(),r.value=!1,h.isSuccess()?(i.value="成功",n.value=!1):(i.value="有错误",n.value=!0)}}const p=()=>{r.value||(h.reset(),r.value=!1,n.value=!1,i.value="")},b=()=>{if(!r.value)if(l.value=!l.value,l.value)e.value=[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]];else{const t=q(e.value);t?(i.value=t,n.value=!0,l.value=!0):(i.value="",n.value=!1,h.setNumbers(e.value))}},y=()=>{i.value="",n.value=!1,l.value=!1};function S(t,s,i){let o=Number(t);Number.isNaN(o)&&(o=0),e.value[s][i]=o}return(t,s)=>((0,o.wg)(),(0,o.iD)("div",G,[(0,o._)("div",T,[l.value?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)(o.HY,{key:0},[(0,o._)("div",null,[E,(0,o._)("input",{value:u.value,onInput:v},null,40,Y)]),(0,o._)("div",{class:(0,d.C_)(["compute-button",{"compute-button--disabled":r.value}]),onClick:w}," 计算 ",2),(0,o._)("div",{class:(0,d.C_)(["compute-button",{"compute-button--disabled":r.value||l.value}]),onClick:p}," 重置 ",2)],64)),(0,o._)("div",{class:(0,d.C_)(["compute-button",{"compute-button--disabled":r.value}]),onClick:b},(0,d.zw)(l.value?"确定":"输入"),3),l.value?((0,o.wg)(),(0,o.iD)("div",{key:1,class:"compute-button",onClick:y},"取消")):(0,o.kq)("",!0)]),(0,o._)("div",$,[l.value?((0,o.wg)(!0),(0,o.iD)(o.HY,{key:1},(0,o.Ko)(e.value,((t,e)=>((0,o.wg)(),(0,o.iD)("div",{key:`line-${e}`,class:"content-line"},[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(t,((t,s)=>((0,o.wg)(),(0,o.j4)(g,{key:`grid-${e}-${s}`,value:t,line:e,column:s,onChange:S},null,8,["value","line","column"])))),128))])))),128)):((0,o.wg)(),(0,o.iD)(o.HY,{key:0},[(0,o._)("div",{class:"location",style:(0,d.j5)({top:60*c.line+"px",left:60*c.column+"px",borderColor:a.value,visibility:r.value?"visible":"hidden"})},null,4),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(h.gridView.grids,((t,e)=>((0,o.wg)(),(0,o.iD)("div",{key:`line-${e}`,class:"content-line"},[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(t,((t,s)=>((0,o.wg)(),(0,o.j4)(f,{key:`grid-${e}-${s}`,item:t,line:e,column:s},null,8,["item","line","column"])))),128))])))),128))],64))]),(0,o._)("div",{class:(0,d.C_)(["message",n.value?"message--error":"message--success"])},(0,d.zw)(i.value),3)]))}};const M=(0,r.Z)(z,[["__scopeId","data-v-113d9d54"]]);var K=M;const Z=[{path:"/",name:"home",component:K}],B=(0,c.p7)({history:(0,c.PO)("/Sudoku/"),routes:Z});var L=B,J=s(65),Q=(0,J.MT)({state:{},getters:{},mutations:{},actions:{},modules:{}});(0,i.ri)(u).use(Q).use(L).mount("#app")}},e={};function s(i){var o=e[i];if(void 0!==o)return o.exports;var n=e[i]={exports:{}};return t[i].call(n.exports,n,n.exports,s),n.exports}s.m=t,function(){var t=[];s.O=function(e,i,o,n){if(!i){var r=1/0;for(c=0;c<t.length;c++){i=t[c][0],o=t[c][1],n=t[c][2];for(var a=!0,l=0;l<i.length;l++)(!1&n||r>=n)&&Object.keys(s.O).every((function(t){return s.O[t](i[l])}))?i.splice(l--,1):(a=!1,n<r&&(r=n));if(a){t.splice(c--,1);var u=o();void 0!==u&&(e=u)}}return e}n=n||0;for(var c=t.length;c>0&&t[c-1][2]>n;c--)t[c]=t[c-1];t[c]=[i,o,n]}}(),function(){s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,{a:e}),e}}(),function(){s.d=function(t,e){for(var i in e)s.o(e,i)&&!s.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={143:0};s.O.j=function(e){return 0===t[e]};var e=function(e,i){var o,n,r=i[0],a=i[1],l=i[2],u=0;if(r.some((function(e){return 0!==t[e]}))){for(o in a)s.o(a,o)&&(s.m[o]=a[o]);if(l)var c=l(s)}for(e&&e(i);u<r.length;u++)n=r[u],s.o(t,n)&&t[n]&&t[n][0](),t[n]=0;return s.O(c)},i=self["webpackChunksudoku"]=self["webpackChunksudoku"]||[];i.forEach(e.bind(null,0)),i.push=e.bind(null,i.push.bind(i))}();var i=s.O(void 0,[998],(function(){return s(8670)}));i=s.O(i)})();
//# sourceMappingURL=app.f6699377.js.map